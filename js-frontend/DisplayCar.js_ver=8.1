//width: 1100px;
//height: 380px;	
//old w:700 h:400

var gwidth_carView1=1000;
var gheight_carView1=376;
var car_link_carView='index.php?lambo=';
var profile_link_carView='index.php?profile=';

function DisplayCarView(result_json){
	
	var car_tml="";
	
	console.log("DisplayCarView");
	console.log(result_json);
	//$("#lambos").html("<p>"+JSON.stringify(result_json)+"</p>");
	
	if(window.mobilecheck()==true) {
		gwidth_carView1=315;
		gheight_carView1=120;
	   } else {
   		gwidth_carView1=1000;
   		gheight_carView1=376;
	   }
	   
	car_tml+=" <div class='row'>";
	
	car_tml+="<div style='display:block;margin:auto'>";
	
	
	
	car_tml+="<svg  width='"+gwidth_carView1+"' height='"+gheight_carView1+"'><rect id='bg' x='0' y='0' width='"+gwidth_carView1+"' height='"+gheight_carView1+"' fill='blue' opacity='0' />";

	for(var j=0;j<tuneOptionsDB.length;j++)
		{
			if(tuneOptionsDB[j].model==result_json.model&&tuneOptionsDB[j].visual==true)
				{
					if(visualAttributesDB[tuneOptionsDB[j].visualAttributesDB].pos=="back")
						{
							car_tml+="<image id='tune_"+j+"' style='display:none' width='"+gwidth_carView1+"' height='"+gheight_carView1+"'"+
							"xlink:href='"+visualAttributesDB[tuneOptionsDB[j].visualAttributesDB].path+"'/>";
						}
					
				}
		

		}

	for(var j=0;j<result_json.svg_components.options.length;j++)
		{
			
			if(result_json.svg_components.pos[j]=="back")
				{
					car_tml+="<image id='"+result_json.svg_components.ids[j]+"' style='display:block' width='"+gwidth_carView1+"' height='"+gheight_carView1+"'"+
					"xlink:href='"+result_json.svg_components.options[j]+"'/>";
				}
		}


	car_tml+="<image style='display:block' width='"+gwidth_carView1+"' height='"+gheight_carView1+"' xlink:href='"+result_json.svg_components.base+"'/>";

	//car_tml+="<image xlink:href="+result_json[i].svg_components.base+" style='display:block' width='"+gwidth+"' height='"+gheight+"'>";
	for(var j=0;j<result_json.svg_components.options.length;j++)
		{
			if(result_json.svg_components.pos[j]=="front")
				{
					car_tml+="<image id='"+result_json.svg_components.ids[j]+"' style='display:block' width='"+gwidth_carView1+"' height='"+gheight_carView1+"'"+
					"xlink:href='"+result_json.svg_components.options[j]+"'/>";
				}
		}




	/*car_tml+="<image style='display:block' width='"+gwidth_carView1+"' height='"+gheight_carView1+"' xlink:href='"+result_json.svg_components.base+"'/>";

	//car_tml+="<image xlink:href="+result_json[i].svg_components.base+" style='display:block' width='"+gwidth+"' height='"+gheight+"'>";
	for(var j=0;j<result_json.svg_components.options.length;j++)
		{
		car_tml+="<image id='"+result_json.svg_components.ids[j]+"' style='display:block' width='"+gwidth_carView1+"' height='"+gheight_carView1+"'"+
		"xlink:href='"+result_json.svg_components.options[j]+"'/>";
	
		}*/
	//Invisible all further availible Tune Options derived from TuneOptionsDB matched with Models options - all invisible
	for(var j=0;j<tuneOptionsDB.length;j++)
		{
			if(tuneOptionsDB[j].model==result_json.model&&tuneOptionsDB[j].visual==true)
				{
					if(visualAttributesDB[tuneOptionsDB[j].visualAttributesDB].pos=="front")
						{
							car_tml+="<image id='tune_"+j+"' style='display:none' width='"+gwidth_carView1+"' height='"+gheight_carView1+"'"+
							"xlink:href='"+visualAttributesDB[tuneOptionsDB[j].visualAttributesDB].path+"'/>";
						}
				}
		

		}
	
	
	car_tml+="</svg>";	
	car_tml+="<p class='elmain2-center'>Serial No.: "+result_json.number+"</p><br><br>";
	car_tml+="   </div>";
	
	//car_tml+="<div class='container marketing' id='tuneView'>asdf</div>";
	

	
	car_tml+=" <div class='col-lg-12'>";
	
	var areEqual=false;
	if(acc!=undefined)
		{
		areEqual = result_json.owner.toUpperCase() === acc.toUpperCase();
		console.log("acc: "+acc.toUpperCase());
		}
	  
	
	
	console.log("owner: "+result_json.owner.toUpperCase());
	if(areEqual)
		{
	   	 car_tml+="<p class='elmain-center'><button class='btn btn-secondary elbutton2' style='color:black' role='button' id='tuneButton_"+result_json.token_id+"' onclick='tuneCar("+result_json.token_id+")'><img class='btnico' src='img/tune.png' > Tune</button>";
	   	 car_tml+=" &middot; <button class='btn btn-secondary elbutton2' style='color:black' role='button' id='transferButton_"+result_json.token_id+"' onclick='openTransferDialog("+result_json.token_id+")'><img class='btnico' src='img/gift.png' > Gift</button>";
	   	 
		 car_tml+=" &middot; <button class='btn btn-secondary elbutton2' style='color:black' role='button' id='sellButton_"+result_json.token_id+"' onclick='selectSellCar("+result_json.token_id+")'><img class='btnico' src='img/sell.png' > Sell</button>";
	   	 car_tml+=" &middot; <button class='btn btn-secondary elbutton2' style='color:black' role='button' id='shareButton' onclick='openShareDialog("+result_json.token_id+")'><img class='btnico' src='img/share.png' > Share</button></p><br>";
   	 
		 car_tml+="<br><br>";
		}
	else{
		//Always display Share:
   	 car_tml+="<p class='elmain-center'><button class='btn btn-secondary elbutton2' style='color:black' role='button' id='shareButton' onclick='openShareDialog("+result_json.token_id+")'><img class='btnico' src='img/share.png' > Share</button></p>";
   	 
	 car_tml+="<br><br>";
	}
	
	//Display Account & Identicon
    car_tml+="<p class='elhead2-center' id='profileViewWallet' > <span id='profileViewIdenticon'> </span> &middot; "+
	"Wallet: <span id='profileWallet'></span></p>";
	
	
	
	
	//Pre-Fill Attributes
	var pf_speed,pf_power,pf_acceleration,pf_cylinder;
	for(var k=0;k<result_json.car_specs.name.length;k++)
 		{
			switch (result_json.car_specs.name[k]) {
			    case "Speed":
			        pf_speed=result_json.car_specs.spec[k];
			        break;
			    case "Power":
			        pf_power=result_json.car_specs.spec[k];
			        break;
			    case "Acceleration":
			        pf_acceleration=result_json.car_specs.spec[k];
			        break;
			    case "Cylinder":
			        pf_cylinder=result_json.car_specs.spec[k];
					if(pf_cylinder=="0 V")
						pf_cylinder="";
			        break;
			    case "Litre":
			        pf_litre=result_json.car_specs.spec[k];
					if(pf_litre=="0.0 litre")
						pf_litre="";
			        break;
			    case "Turbo":
			        pf_turbo=result_json.car_specs.spec[k];
			        break;
			    case "Chassis":
			        pf_chassis=result_json.car_specs.spec[k];
			        break;
			    case "Aerodynamics":
			        pf_aerodynamics=result_json.car_specs.spec[k];
			        break;
			    case "Colour":
			        pf_colour=result_json.car_specs.spec[k];
			        break;
			}
	
 		}	
		
	//End Pre-Fill Attributes
	
	
    car_tml+="<table class='eltable3-center tbldesktop' style='width:100%;'>"+
     		"<tr>"+
       "<th height='70'  class='elmain2-center' >S P E C I F I C A T I O N S</th>"+
  	  "<th height='70' class='elmain2-center'>U P G R A D E S</th>"+

      "</tr> "+
      "<tr>"+
        "<td height='30'  class='elmain tdwidth' >Engine:  <span class='tblspan100'></span>"+pf_litre+" "+pf_turbo+" "+pf_cylinder+"</td>"+
	"<td rowspan='8' class='elmain tblpadding'> "; 
  		
		//Add Upgrades (if any)
		for(var k=0;k<result_json.tune_options.name.length;k++)
	 		{
				if(result_json.tune_options.name[k]!="")
				{
					car_tml+="<p class='elmain'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<img src='img/upgrade.png' style='width:25px;height:25px'/>";
					
					car_tml+= "&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ";	
					car_tml+=result_json.tune_options.name[k];
					for(var l=40;l>result_json.tune_options.name[k].length;l--)
						car_tml+= "&nbsp; "
					car_tml+="</p>";
					//car_tml+="Description: "+result_json.tune_options.description[k]+"</p>";
				}
				else
				{
					car_tml+="<p class='elmain'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;No Upgrades yet.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p>";
					
					//car_tml+=" ---------------------- No Upgrades yet! ----------------------";
				}
			
	 		}
  		//End Add Upgrades 
			
			car_tml+="</td>";
			car_tml+="</tr>";
			
			
			
     car_tml+="<tr>"+
        "<td height='30' class='elmain'>Max. Power:<span class='tblspan70'></span>"+pf_power+"</td>"+


      "</tr>"+
     "<tr>"+
        "<td height='30' class='elmain'>Top Speed:<span class='tblspan77'></span>"+pf_speed+"</td>"+
      "</tr>"+
      "<tr>"+
        "<td height='30' class='elmain'>Acceleration:<span class='tblspan65'></span>0 to 100 km/h in "+pf_acceleration+"</td>"+
      "</tr>"+
      "<tr>"+
        "<td height='30' class='elmain'>Chassis:<span class='tblspan95'></span>"+pf_chassis+"</td>"+
      "</tr>"+
      "<tr>"+
        "<td height='30' class='elmain'>Aerodynamics:<span class='tblspan53'></span>"+pf_aerodynamics.substring(0, 53)+"<br> <span class='tblspan146'></span>"+pf_aerodynamics.substring(53, 100)+"</td>"+
     " </tr>"+
      "<tr>"+
        "<td height='30' class='elmain'>Colour:<span class='tblspan99'></span>"+pf_colour+"</td>"+
      "</tr>"+
    "</table>"+
 
  	  "<table class='eltable3-center tblmobile' style='width:100%;'>"+
  	   "<tr>"+
  	     "<th colspan='2' height='70'  class='elmain2-center' >S P E C I F I C A T I O N S</th>"+
		 

  	    "</tr>"+ 
  	    "<tr>"+
  	      "<td height='30'  class='elmain tdwidth' >Engine: </td>"+
  		  "<td class='elmain-center tdwidth'> "+pf_litre+" "+pf_turbo+"<br>"+pf_cylinder+"</td>"+
  	"</td>"+
  	    "</tr>"+
  	   "<tr>"+
  	      "<td height='30' class='elmain'>Max. Power:</td>"+
  "<td class='elmain-center'> "+pf_power+"</td>"+

  	    "</tr>"+
  	   "<tr>"+
  	      "<td height='30' class='elmain'>Top Speed:</td>"+
  		  "<td class='elmain-center'> "+pf_speed+"</td>"+
  	    "</tr>"+
  	    "<tr>"+
  	      "<td height='30' class='elmain'>Acceleration:</td>"+
  		  "<td class='elmain-center'> 0 to 100 km/h in "+pf_acceleration+"</td>"+
  	    "</tr>"+
  	    "<tr>"+
  	      "<td height='30' class='elmain'>Chassis:</td>"+
  		  "<td class='elmain-center'> "+pf_chassis+"</td>"+
  	    "</tr>"+
  	    "<tr>"+
  	      "<td height='30' class='elmain'>Aerodynamics:<span class='tblspan53'></td>"+
  		  "<td class='elmain-center'> "+pf_aerodynamics.substring(0, 53)+"<br>  "+pf_aerodynamics.substring(53, 100)+"</td>"+
  	    "</tr>"+
  	    "<tr>"+
  	      "<td height='30' class='elmain'>Colour:</td>"+
  		  "<td class='elmain-center'> "+pf_colour+"</td>"+
  	    "</tr>"+
  	  "</table>	"+
	  
	 
  	    "<table class='eltable3-center tblmobile' style='margin-left:10%;width:100%;'>"+
  			 "<br>"+
  	     "<tr>"+
  	  	  "<th height='70' class='elmain2-center'>U P G R A D E S</th>"+

  	      "</tr>"+ 
  	      "<tr>"+
	      
			"<td class='elmain tblpadding' >";
			//Add Upgrades (if any)
			for(var k=0;k<result_json.tune_options.name.length;k++)
		 		{
					if(result_json.tune_options.name[k]!="")
					{
						car_tml+="<p class='elmain'><img src='img/upgrade.png' style='width:25px;height:25px'/>";
					
						car_tml+= "&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ";	
						car_tml+=result_json.tune_options.name[k];
						//for(var l=30;l>result_json.tune_options.name[k].length;l--)
						//	car_tml+= "&nbsp; "
						car_tml+="</p>";
						//car_tml+="Description: "+result_json.tune_options.description[k]+"</p>";
					}
					else
					{
						car_tml+="<p class='elmain'>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;No Upgrades yet.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p>";
					
						//car_tml+=" ---------------------- No Upgrades yet! ----------------------";
					}
			
		 		}
			car_tml+="</td>"+"</tr>"+
    "</table>";
	
	
	 car_tml+="    <p></p>";
	 car_tml+="    </div>";
     car_tml+=" </div>   ";
	
 	
	
	
	
  
	
	
	
	
	
	/*for(var j=0;j<result_json.car_specs.name.length;j++)
 		{
 		car_tml+="<image id='"+result_json.svg_components.ids[j]+"' style='display:block' width='"+gwidth_carView+"' height='"+gheight_carView+"'"+
 		"xlink:href='"+result_json.svg_components.options[j]+"'/>";
	
 		}*/
	
	
	console.log(car_tml);
	$("#profileView").html(car_tml);
	
	
	var data = new Identicon(result_json.owner, options).toString();
	var trimmedProfile = result_json.owner.substring(0, 9);
	var areEqual=false;
	if(acc!=undefined)
		{
		areEqual = result_json.owner.toUpperCase() === acc.toUpperCase();	
		console.log("acc: "+acc.toUpperCase());
		}
		
	
	
	console.log("Owner: "+result_json.owner.toUpperCase());
	if(areEqual)
		{
		$("#profileWallet").html("<a href='"+profile_link_carView+result_json.owner+"'>"+trimmedProfile+"... (YOU)"+"</a>");	
		}
	else
		{
		$("#profileWallet").html("<a href='"+profile_link_carView+result_json.owner+"'>"+trimmedProfile+"... "+"</a>");	
		}
	$("#profileViewIdenticon").html('<img src="data:image/svg+xml;base64,' + data + '">');
	
}




function DisplayMockupCarView(model){
	
	var car_tml="";
	
	console.log("DisplayMockupCarView");
	console.log(model);
	//$("#lambos").html("<p>"+JSON.stringify(result_json)+"</p>");
	
	if(window.mobilecheck()==true) {
		gwidth_carView1=315;
		gheight_carView1=120;
	   } else {
   		gwidth_carView1=1000;
   		gheight_carView1=376;
	   }
 
	//refreshMockupTuneOptions(model);
	var model_name="";
	for(var i=0;i<modelsDB.length;i++)
		{
			if(model==modelsDB[i].model)
				{
					model_name=modelsDB[i].name;
				}
		}
	
	
	var dataArray = [];
	

	for(var i=0,j=1;i<tuneOptionsDB.length;i++)
		{
			if(model_name==tuneOptionsDB[i].model&&tuneOptionsDB[i].visual==true)
				{
					dataArray[j]=i;
					j++;
				}
		}
	
	var selectbox = $('#MockupTuneOptions');
	selectbox.empty();
	selectbox.append("<option value=''>PLEASE SELECT AN OPTION</option>");
	if(dataArray[1]!=0)
		{
 	       dataArray.forEach(function (data) {
 	           selectbox.append("<option value="+data+">" + tuneOptionsDB[data].title + "</option>");
 	       });
		}
	selectbox.append("<option value='all'>ALL OPTIONS</option>");
	
    $("#tuneView").show();
	
	
	
	
	var result_json= JSON.parse(JSON.stringify(showLambo(new BigNumber('100000000000000000000000000000000000000000000000000000000000000000000000'),model,0)));
	result_json.token_id=0;
	car_tml+=" <div class='row'>";
	
	car_tml+="<div style='display:block;margin:auto'>";
	
	
	
	car_tml+="<svg  width='"+gwidth_carView1+"' height='"+gheight_carView1+"'><rect id='bg' x='0' y='0' width='"+gwidth_carView1+"' height='"+gheight_carView1+"' fill='blue' opacity='0' />";

	//Invisible all further availible Tune Options derived from TuneOptionsDB matched with Models options - all invisible
	for(var j=0;j<tuneOptionsDB.length;j++)
		{
			if(tuneOptionsDB[j].model==result_json.model&&tuneOptionsDB[j].visual==true)
				{
					if(visualAttributesDB[tuneOptionsDB[j].visualAttributesDB].pos=="back")
						{
							car_tml+="<image id='tune_"+j+"' style='display:none' width='"+gwidth_carView1+"' height='"+gheight_carView1+"'"+
							"xlink:href='"+visualAttributesDB[tuneOptionsDB[j].visualAttributesDB].path+"'/>";
						}
					
				}
		

		}

	for(var j=0;j<result_json.svg_components.options.length;j++)
		{
			
			if(result_json.svg_components.pos[j]=="back")
				{
					car_tml+="<image id='"+result_json.svg_components.ids[j]+"' style='display:block' width='"+gwidth_carView1+"' height='"+gheight_carView1+"'"+
					"xlink:href='"+result_json.svg_components.options[j]+"'/>";
				}
		}


	car_tml+="<image style='display:block' width='"+gwidth_carView1+"' height='"+gheight_carView1+"' xlink:href='"+result_json.svg_components.base+"'/>";

	//car_tml+="<image xlink:href="+result_json[i].svg_components.base+" style='display:block' width='"+gwidth+"' height='"+gheight+"'>";
	for(var j=0;j<result_json.svg_components.options.length;j++)
		{
			if(result_json.svg_components.pos[j]=="front")
				{
					car_tml+="<image id='"+result_json.svg_components.ids[j]+"' style='display:block' width='"+gwidth_carView1+"' height='"+gheight_carView1+"'"+
					"xlink:href='"+result_json.svg_components.options[j]+"'/>";
				}
		}
	
		//Invisible all further availible Tune Options derived from TuneOptionsDB matched with Models options - all invisible
		for(var j=0;j<tuneOptionsDB.length;j++)
			{
				if(tuneOptionsDB[j].model==result_json.model&&tuneOptionsDB[j].visual==true)
					{
						if(visualAttributesDB[tuneOptionsDB[j].visualAttributesDB].pos=="front")
							{
								car_tml+="<image id='tune_"+j+"' style='display:none' width='"+gwidth_carView1+"' height='"+gheight_carView1+"'"+
								"xlink:href='"+visualAttributesDB[tuneOptionsDB[j].visualAttributesDB].path+"'/>";
							}
					}
		

			}
	
	car_tml+="</svg>";	
	car_tml+="   </div>";
	car_tml+=" <div class='col-lg-12'>";
	 car_tml+="    <p></p>";
	 car_tml+="    </div>";
     car_tml+=" </div>   ";
	
 
	
	console.log(car_tml);
	$("#profileView").html(car_tml);

	
}


function refreshSelectedMockupTuneOptions(model){
	try{
		var tuneOptions = document.getElementById("MockupTuneOptions");
		var selectedOption = tuneOptions.options[tuneOptions.selectedIndex].value;
		console.log("Selected Option:"+selectedOption);
		
		for(var i=0;i<tuneOptionsDB.length;i++)
			$("#tune_"+i).hide();
		
		//SPECIAL FOR SATOSHI REAR WING AGAINST LARGE REAR WING
		if(selectedOption=="all")
			{
				for(var i=0;i<tuneOptionsDB.length;i++)
					$("#tune_"+i).show();
				
				if(model=="2")
					{
					$("#satoshi_rearwing").hide();	
					}
				
			$("#TuneOptionDescription").html("<p>All Options</p>");
			}
		else
			{
				if(model=="2"&&selectedOption==18)
					{
					$("#satoshi_rearwing").hide();	
					}
				else{
						$("#satoshi_rearwing").show()
					}	
			$("#tune_"+selectedOption).show();
		
			$("#TuneOptionDescription").html("<p>"+tuneOptionsDB[selectedOption].description+"</p>");
							//$("#TuneOptionPrice").html(" "+priceInEther+" ETH"); 
							//$("#TuneOptionPrice").val(result); 
			
			}
		
		
		
			
	
		}
	catch(err)
		{
			console.log("no Options ready");
			$("#TuneOptionDescription").html("<p>No Options available</p>");
		}
	
} 